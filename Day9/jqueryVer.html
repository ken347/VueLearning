<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.js"
      integrity="sha512-gh+25Y0CTHtw1FSJ4gDKYDFlZ84oV0l1bY5v7xrIwep7M1aV+7JgUaTu55bMerCblbPUD22MKlStyUwO9lHq4w=="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
      crossorigin="anonymous"
    ></script>
    <style>
      .fade-enter,
      .fade-leave-to {
        opacity: 0;
      }
      .fade-enter-active,
      .fade.leave.active {
        transition: opacity 1s;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <section>
        <div class="container">
          <div class="title">
            <img :src="src" class="logo" />
            <h1>{{title}}</h1>
            <div class="description">
              <!-- <a class="arrow left" v-on:click="ChangeIndex(-1)">上一頁</a> -->
              <!--如果不是第一天就秀出來-->
              <a class="arrow left" @click="ChangeIndex(-1)" v-if="index>0"
                >上一頁</a
              >
              <!-- 給key做辨別 -->
              <!-- out-in先退再進，畫面只出現一個 -->
              <!--appear網頁一開便有效果-->
              <!-- :css="false"，避免程式面與css衝突，以程式面為主 -->
              <transition
                @before-enter="BeforeEnterHandler"
                @enter="EnterHandler"
                @after-enter="AfterEnterHandler"
                @enter-cancelled="AfterEnterHandler"
                @before-leave="BeforeLeaveHandler"
                @leave="LeaveHandler"
                @after-leave="AfterLeaveHandler"
                @leave-cancelled="AfterLeaveHandler"
                mode="out-in"
                appear
                :css="false"
              >
                <div
                  class="menuItem white"
                  v-for="(item,i) in menu"
                  v-if="index===i"
                  :key="item.title"
                >
                  <span class="number">{{i+1}}</span>
                  <!-- <span class="type">{{menu[index].type}}</span> -->
                  <span class="type">{{item.type}}</span>
                  <a :href="item.link" class="title" target="vue-iron"
                    >{{item.title}}</a
                  >
                  <!--如果不是最後一天就秀出來-->
                  <a
                    class="arrow right"
                    @click="ChangeIndex(1)"
                    v-if="index<pages-1"
                    >下一頁</a
                  >
                </div>
              </transition>
            </div>
          </div>
        </div>
      </section>
    </div>
    <script>
      let data = {
        title: 'Vue.js 學習紀錄',
        src: './img/photo-1494187570835-b188e7f0f26e.jpg',
        index: 0,
        menu: [
          { type: 'Type1', title: 'Item1', link: 'javascript:;' },
          { type: 'Type2', title: 'Item2', link: 'javascript:;' },
          { type: 'Type3', title: 'Item3', link: 'javascript:;' },
          { type: 'Type4', title: 'Item4', link: 'javascript:;' },
          { type: 'Type5', title: 'Item5', link: 'javascript:;' },
          { type: 'Type6', title: 'Item6', link: 'javascript:;' },
          { type: 'Type7', title: 'Item7', link: 'javascript:;' },
          { type: 'Type1', title: 'Item8', link: 'javascript:;' },
          { type: 'Type2', title: 'Item9', link: 'javascript:;' },
          { type: 'Type3', title: 'Item10', link: 'javascript:;' },
          { type: 'Type4', title: 'Item11', link: 'javascript:;' },
          { type: 'Type5', title: 'Item12', link: 'javascript:;' },
          { type: 'Type6', title: 'Item13', link: 'javascript:;' },
          { type: 'Type7', title: 'Item14', link: 'javascript:;' },
          { type: 'Type1', title: 'Item15', link: 'javascript:;' },
          { type: 'Type2', title: 'Item16', link: 'javascript:;' },
          { type: 'Type3', title: 'Item17', link: 'javascript:;' },
          { type: 'Type4', title: 'Item18', link: 'javascript:;' },
          { type: 'Type5', title: 'Item19', link: 'javascript:;' },
          { type: 'Type6', title: 'Item20', link: 'javascript:;' },
          { type: 'Type7', title: 'Item21', link: 'javascript:;' },
        ],
      }

      let vm = new Vue({
        el: '#app',
        data: data,
        computed: {
          today() {
            return this.menu[this.index]
          },
          pages() {
            return this.menu.length
          },
        },
        methods: {
          ChangeIndex(offset) {
            // ※出現負數會有問題this.index += offset
            this.index =
              (this.index + this.menu.length + offset) % this.menu.length
          },
          //e為js的dom物件
          BeforeEnterHandler(e) {
            $(e).css({ opacity: 0 })
          },
          //done為做完動畫的callback
          EnterHandler(e, done) {
            $(e).animate({ opacity: 1 }, 1000, done)
          },
          //重新將opactiy設為空，避免殘留動畫中設定的值
          AfterEnterHandler(e) {
            $(e).css({ opacity: '' })
          },
          //e為js的dom物件
          BeforeLeaveHandler(e) {
            $(e).css({ opacity: 1 })
          },
          //done為做完動畫的callback
          LeaveHandler(e, done) {
            $(e).animate({ opacity: 0 }, 1000, done)
          },
          //重新將opactiy設為空，避免殘留動畫中設定的值
          AfterLeaveHandler(e) {
            $(e).css({ opacity: '' })
          },
        },
      })
    </script>
  </body>
</html>
